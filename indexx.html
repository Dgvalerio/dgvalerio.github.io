<!DOCTYPE html>
<!-- REGRAS PARA ID'S
        - 1º Sempre começar com letras minúsculas;
        - 2º Não são permitidos espaços nem acentos;
        - 3º A primeira letra de cada palavra é maiúscula, só a primeira letra, independentemente de ser uma sigla ou não.
-->
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title> C.A.F.E. </title>
    <link rel="shortcut icon" href="ext/logo_miniatura.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="bootstrap.css">
    <script src="js/jquery-3.1.0.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script type="application/javascript">
        var c, naf, sx, gv, nva;
        function calculaGMB(s,i,P,g,n){
            var gmb=0;
            if (s==1){
                if (i>=1 && i<=3) { gmb=(60.9*P)-54 }
                else if (i>=4 && i<=10) { gmb = (22.7 * P) + 495 }
                else if (i>=11 && i<=18) { gmb = (17.5 * P) + 651 }
                else if (i>=19 && i<=30) { gmb = (15.3 * P) + 679 }
                else if (i>=31 && i<=60) { gmb = (11.6 * P) + 879 }
                else if (i>60) { gmb = (13.5 * P) + 487 }
            }
            else if (s==2){
                if (i>=1 && i<=3) { gmb = (61 * P) - 51 }
                else if (i>=4 && i<=10) { gmb = (22.5 * P) + 499 }
                else if (i>=11 && i<=18) { gmb = (12.2 * P) + 746 }
                else if (i>=19 && i<=30) { gmb = (14.7 * P) + 496 }
                else if (i>=31 && i<=60) { gmb = (8.7 * P) + 829 }
                else if (i>60) { gmb = (10.5 * P) + 596 }
                if (g==1) { if (n == 1) { gmb += 200 } }
                else if (n==2) { gmb += 285 }
            }
            return gmb;
        }

        function calculaGET(gmb,s,i,n){
            var GET=0;
            if (s==1) {
                if (n == 1) { GET = gmb * 1.55 }
                else if (n == 2) { GET = gmb * 1.78 }
                else if (n == 3) { GET = gmb * 2.10 }
            }
            else if (s==2) {
                if (n == 1) { GET = gmb * 1.56 }
                else if (n == 2) { GET = gmb * 1.64 }
                else if (n == 3) { GET = gmb * 1.82 }
            }
            if (i>=13 && i<=15) { GET += (GET * 0.13) }
            else if (i>=16 && i<=19) { GET += (GET * 0.05) }
            else if (i>=40 && i<=49) { GET -= (GET * 0.05) }
            else if (i>=50 && i<=59) { GET -= (GET * 0.10) }
            else if (i>=60 && i<=69) { GET -= (GET * 0.20) }
            else if (i>70) { GET -= (GET * 0.30) }
            return GET;
        }

        function calculo(){
            if (verificaCalcula()) {
                $('#pnFormulario').collapse('hide');
                $('#pn04').collapse('hide');

                $('#formulario').css({"opacity":"0","transition":"all .5s"});
                $('#pnResposta').collapse('show').css({"opacity":"1","transition":"all .5s"});

                r = 1;
                var sexo = 0;
                var gest = 0;
                var nome = document.form.pNome.value;
                $("#pnRNome").html(nome);
                var idade = document.form.pIdade.value;
                $("#pnRIdade").html(idade);
                naf =  document.form.pNivel.value;
                if (naf == 1) { nva = "Leve" }  else if (naf == 2) { nva = "Moderada" }  else if (naf == 3) { nva = "Intensa" }
                $("#pnRNivel").html(nva);
                var peso = document.form.pMassa.value;
                $("#pnRMassa").html(peso);
                var altura = document.form.pEstrutura.value;
                $("#pnREstatura").html(altura);
                if (document.form.pSexMasculino.checked) { sexo = 1; sx = "Masculino"; }
                else if (document.form.pSexFeminino.checked) { sexo = 2; sx = "Feminino"; }
                $("#pnRSexo").html(sx);
                if (document.form.pGravidaS.checked) { gest = 1; gv = "Sim"; }
                else if (document.form.pGravidaN.checked) { gest = 2; gv = "Não"; }

                var imc = peso / (altura * altura);
                if (imc < 18.5) {dimc = "Baixo peso";} else if (imc >= 18.5 && imc < 25) {dimc = "Peso Normal";} else if (imc >= 25 && imc < 30) {dimc = "Pré-obesidade";} else if (imc >= 30 && imc < 35) {dimc = "Obesidade Grau I";}else if (imc >= 35 && imc < 40) {dimc = "Obesidade Grau II";}else if (imc > 40) {dimc = "Obesidade Grau III";}
                $("#cIMC").html(parseFloat(imc.toFixed(2))); $("#dIMC").html(dimc);
                var gmb = calculaGMB(sexo, idade, peso, gest, naf);
                $("#cGMB").html(parseFloat(gmb.toFixed(2)));
                var GET = calculaGET(gmb, sexo, idade, naf);
                $("#cGET").html(parseFloat(GET.toFixed(2)));
            } else { alert("Preencha todos os campos obrigatórios!") }
        }

        function recalculo(){
            r = 0;
            $('#pnFormulario').collapse('show');
            $('#pnResposta').collapse('hide').css({"opacity":"0","transition":"all .5s"});
            $('#formulario').css({"opacity":"1","transition":"all .5s"});
        }

        setTimeout(function(){document.getElementById('gif').style.opacity = '0';
            document.getElementById('gif').style.transition = 'all 1s';
            document.getElementById('preloader').style.opacity = '0';
            document.getElementById('preloader').style.transition = 'all 1s';
            document.getElementById('content').style.display = 'block';
            setTimeout(function(){
                document.getElementById('gif').style.display = 'none';
                document.getElementById('preloader').style.display = 'none';
            },100);
        },3800);

        setTimeout(function(){(setInterval('forms()',200))},3000);
        var stat = 0;
        var r = 0;
        $(document).ready(function () { $('#formulario').collapse('show'); $('#pnFormulario').collapse('show'); });

        function verificaSexo() {
            if (document.getElementById('pSexFeminino').checked) {
                $('#pnGravida').collapse('show');
                if (stat>=5){
                    $("#pGravidaS").prop("disabled", false);
                    $("#pGravidaN").prop("disabled", false);
                }
                if (document.getElementById('pGravidaS').checked){
                    $("#opIntensa").prop("disabled", true);
                    if (document.getElementById('pNivel').value == 3){ document.getElementById('pNivel').value = 0 }
                }
                else{ $("#opIntensa").prop("disabled", false); }
            }
            if (document.getElementById('pSexMasculino').checked) {
                $('#pnGravida').collapse('hide');
                document.getElementById('pGravidaS').checked=false;
                document.getElementById('pGravidaN').checked=false;
                $("#opIntensa").prop("disabled", false)
            }
        }

        function verificaCalcula() {
            if (document.getElementById('pNome').value != "" && document.getElementById('pIdade').value != "" && r==0) {
                if (document.getElementById('pSexFeminino').checked) {
                    if (document.getElementById('pMassa').value != "" && document.getElementById('pEstrutura').value != "" && document.getElementById('pNivel').value != "" && (document.getElementById('pGravidaS').checked || document.getElementById('pGravidaN').checked)){
                        $('#pn04').collapse('show');
                        return true;
                    }
                    else {
                        $('#pn04').collapse('hide');
                        return false;
                    }
                }
                if (document.getElementById('pSexMasculino').checked) {
                    if (document.getElementById('pMassa').value != "" && document.getElementById('pEstrutura').value != "" && document.getElementById('pNivel').value != ""){
                        $('#pn04').collapse('show');
                        return true;
                    }
                    else {
                        $('#pn04').collapse('hide');
                        return false;
                    }
                }
            }
            else {
                $('#pn04').collapse('hide');
                return false;
            }
        }

        function dadosEspeciais() {
            if (document.getElementById("pIdade").value != "") {
                var i = document.getElementById("pIdade").value;
                c = "0";
                if (i >= 13 && i <= 15) {
                    c = "13"
                }
                else if (i >= 16 && i <= 19) {
                    c = "5"
                }
                else if (i >= 40 && i <= 49) {
                    c = "-5"
                }
                else if (i >= 50 && i <= 59) {
                    c = "-10"
                }
                else if (i >= 60 && i <= 70) {
                    c = "-20"
                }
                else if (i > 70) {
                    c = "-30"
                }
                if (c != "0") {
                    $('#smCorrecao').collapse('show');
                    $("#spCorrecao").html(c + "%");
                }
                else {
                    $('#smCorrecao').collapse('hide');
                }
            }
            if (document.getElementById("pSexMasculino").checked) {
                naf = document.getElementById("pNivel").value;
                c = 0;
                if (naf == 1) {
                    c = "1,55"
                }
                else if (naf == 2) {
                    c = "1,78"
                }
                else if (naf == 3) {
                    c = "2,10"
                }
                if (c != "0") {
                    $('#smFator').collapse('show');
                    $("#spFator").html(c);
                }
                else {
                    $('#smFator').collapse('hide');
                }
            }

            if (document.getElementById("pSexFeminino").checked) {
                naf = document.getElementById("pNivel").value;
                c = 0;
                if (naf == 1) {
                    c = "1,56"
                }
                else if (naf == 2) {
                    c = "1,64"
                }
                else if (naf == 3) {
                    c = "1,82"
                }
                if (c != "0") {
                    $('#smFator').collapse('show');
                    $("#spFator").html(c);
                }
                else {
                    $('#smFator').collapse('hide');
                }
            }
        }

        function forms(){
            switch (stat) {
                case 0:
                    $("#pIdade").prop("disabled", true);
                    $("#pSexMasculino").prop("disabled", true);
                    $("#pSexFeminino").prop("disabled", true);
                    $("#pGravidaS").prop("disabled", true);
                    $("#pGravidaN").prop("disabled", true);
                    $("#pMassa").prop("disabled", true);
                    $("#pEstrutura").prop("disabled", true);
                    $("#pNivel").prop("disabled", true);
                    if (document.getElementById('pNome').value != "") { stat = 1; }
                    verificaCalcula();
                    break;
                case 1:
                    $("#pIdade").prop("disabled", false);
                    if (document.getElementById('pIdade').value != "") { stat = 2; }
                    verificaCalcula();
                    break;
                case 2:
                    $("#pSexMasculino").prop("disabled", false);
                    $("#pSexFeminino").prop("disabled", false);
                    if (document.getElementById("pSexMasculino").checked || document.getElementById('pSexFeminino').checked) { stat = 3; }
                    verificaCalcula();
                    dadosEspeciais();
                    break;
                case 3:
                    $('#pn02').collapse('show');
                    $("#pMassa").prop("disabled", false);
                    if (document.getElementById('pMassa').value != "") { stat = 4; }
                    verificaCalcula();
                    dadosEspeciais();
                    verificaSexo();
                    break;
                case 4:
                    $("#pEstrutura").prop("disabled", false);
                    if (document.getElementById('pEstrutura').value != "") { stat = 5; }
                    verificaCalcula();
                    dadosEspeciais();
                    verificaSexo();
                    break;
                case 5:
                    if (document.getElementById("pSexMasculino").checked) { $('#pn03').collapse('show') }
                    if (document.getElementById("pSexFeminino").checked && (document.getElementById('pGravidaS').checked || document.getElementById('pGravidaN').checked)) { $('#pn03').collapse('show'); }
                    $("#pNivel").prop("disabled", false);
                    verificaCalcula();
                    dadosEspeciais();
                    verificaSexo();
                    break;
                default:
                    stat=0;
            }
        }
    </script>
</head>
<body class="plBG7">
<div id="preloader" style="display:block; position: absolute; left: 0; right: 0; bottom: 0; top: 0; background: #1b272e; z-index: 9999;">
    <img id="gif" src="ext/anim.gif" style="width:640px; height:360px; position:absolute; top:50%; left:50%; margin-top:-180px; margin-left:-320px;">
</div>
<div id="content" style="display: none">
    <nav class="navbar-y"> <div class="plBG5 navbar-y"><br/> <br/> <br/> <br/> <br/> </div> </nav>
    <div class="container" align="center">
        <nav class="navbar-fixed-top navbar-x"> <div class="plBG5 navbar-x"> <img class="m-a-p" src="ext/logo_transp_branco.png" width="100"> </div> </nav>
        <form class="form-custom plBG9" method="post" name="form" id="formulario">
            <div id="pnFormulario" class="collapse">
                <div id="pn01">
                    <label class="labPer" for="pNome">Nome</label> <br/>
                    <input  id="pNome" type="text" placeholder="Digite seu nome" class="form-control" title="Nome"/> <br/>

                    <label class="labPer" for="pIdade">Idade</label> <br/>
                    <input id="pIdade" type="number" placeholder="0" min="0" class="form-control">
                    <small class="right collapse" id="smCorrecao">Correção do fator de atividade Física: <span id="spCorrecao"> ~ </span> <br/> </small> <br/>

                    <div id="pnSexo">
                        <label class="labPer">Sexo</label> <br/>
                        <label class="custom-control custom-radio">
                            <input id="pSexMasculino" name="pSex" type="radio" value="opSex1" class="custom-control-input">
                            <span class="custom-control-indicator"></span>
                            <span class="custom-control-description">Masculino</span>
                        </label>
                        <label class="custom-control custom-radio m-l-3">
                            <input id="pSexFeminino" name="pSex" type="radio" value="opSex2" class="custom-control-input">
                            <span class="custom-control-indicator"></span>
                            <span class="custom-control-description">Feminino</span>
                        </label>
                    </div> <br/>
                </div>

                <div class="collapse" id="pn02">
                    <label class="labPer" for="pMassa">Massa corporal</label>
                    <div class="form-group">
                        <div class="input-group">
                            <input type="number" id="pMassa" placeholder="0" min="0" class="form-control">
                            <div class="input-group-addon">Kg</div>
                        </div>
                    </div> <br/>

                    <label class="labPer" for="pEstrutura">Estatura</label>
                    <div class="form-group">
                        <div class="input-group">
                            <input type="number" id="pEstrutura" placeholder="0" min="0" step="any" class="form-control">
                            <div class="input-group-addon">m</div>
                        </div>
                    </div> <br/>

                    <div class="collapse" id="pnGravida">
                        <label class="labPer">Grávida</label> <br/>
                        <label class="custom-control custom-radio">
                            <input id="pGravidaS" name="pGravida" type="radio" value="opGra1" class="custom-control-input">
                            <span class="custom-control-indicator"></span>
                            <span class="custom-control-description">Sim</span>
                        </label>
                        <label class="custom-control custom-radio m-l-3">
                            <input id="pGravidaN" name="pGravida"  type="radio" value="opGra2" class="custom-control-input">
                            <span class="custom-control-indicator"></span>
                            <span class="custom-control-description">Não</span>
                        </label>
                    </div> <br/>
                </div>

                <div class="collapse" id="pn03">
                    <label for="pNivel" class="labPer">Nível de atividade física</label>
                    <select id="pNivel" class="form-control">
                        <option value=""> (Clique para selecionar) </option>
                        <option value="1"> Leve </option>
                        <option value="2"> Moderada </option>
                        <option value="3" id="opIntensa"> Intensa </option>
                    </select>
                    <small class="left collapse" id="smFator">Fator de atividade Física: <span id="spFator"> ~ </span> </small>
                    <br/>
                </div>
            </div>

            <div class="collapse" id="pn04">
                <button id="btnCalc" class="btn btn-primary btn-block btn-lg" type="button" onclick="calculo()">Calcular</button>
            </div>

            <div class="collapse" id="pn05">
                <label for="pImcDes" class="labPer">IMC desejado (Kg/m<sup>2</sup>)</label>
                <div class="form-group">
                    <div class="input-group">
                        <input type="number" id="pImcDes" placeholder="0" min="0" class="form-control">
                        <div class="input-group-addon">Kg/m<sup>2</sup></div>
                    </div>
                </div> <br/>

                <label for="pPesoDes" class="labPer">Peso desejado (em Kg)</label>
                <div class="form-group">
                    <div class="input-group">
                        <input type="number" id="pPesoDes" placeholder="0" min="0" class="form-control">
                        <div class="input-group-addon">Kg</div>
                    </div>
                </div> <br/>
            </div>
        </form>

        <br/>

        <div class="form-custom plBG4 collapse" id="pnResposta">
            <table class="table table-striped">
                <thead> <tr> <th class="text-md-center" colspan="4"> Dados Básicos </th> </tr> </thead>
                <tbody>
                <tr> <td class="text-md-center" colspan="4"> <span id="pnRNome"> NOME </span> </td> </tr>
                <tr>
                    <th class="col-md-3 text-md-right" scope="row"> <span> Idade: </span> </th>
                    <td class="col-md-3 text-md-left"> <span id="pnRIdade"> IDADE </span> </td>
                    <th class="col-md-3 text-md-right" scope="row"> <span> Sexo: </span> </th>
                    <td class="col-md-3 text-md-left"> <span id="pnRSexo"> SEXO </span> </td> </tr>
                <tr>
                    <th class="col-md-3 text-md-right" scope="row"> <span> Massa corporal: </span> </th>
                    <td class="col-md-3 text-md-left"> <span id="pnRMassa"> MASSA </span> </td>
                    <th class="col-md-3 text-md-right" scope="row"> <span> Estatura: </span> </th>
                    <td class="col-md-3 text-md-left"> <span id="pnREstatura"> ESTATURA </span> </td> </tr>
                <tr>
                    <th class="col-md-6 text-md-right" colspan="2"> <span> Nível de atividade Física: </span> </th>
                    <td class="col-md-6 text-md-left" colspan="2"> <span id="pnRNivel"> NÍVEL </span> </td>
                </tr>
                </tbody>
            </table> <br/>

            <table class="table table-striped">
                <thead> <tr> <th class="text-md-center" colspan="3"> Projeções </th> </tr> </thead>
                <tbody>
                <tr>
                    <th class="col-md-4 text-md-right" scope="row">GET (Gasto Energético Total):</th>
                    <td class="col-md-4 text-md-center"> <span id="cGET"> - </span> </td>
                    <td class="col-md-4 text-md-left"> <span> </span> </td> </tr>
                <tr>
                    <th class="col-md-4 text-md-right" scope="row">GMB (Gasto Metabólico Basal):</th>
                    <td class="col-md-4 text-md-center"> <span id="cGMB"> - </span> </td>
                    <td class="col-md-4 text-md-left"> <span> </span> </td> </tr>
                <tr>
                    <th class="col-md-4 text-md-right" scope="row">IMC (Índice de Massa Corporal):</th>
                    <td class="col-md-4 text-md-center"> <span id="cIMC"> - </span> </td>
                    <td class="col-md-4 text-md-left"> <span id="dIMC"> - </span> </td> </tr>
                </tbody>
            </table> <br/>

            <table class="table table-striped">
                <thead> <tr> <th class="text-md-center" colspan="2"> Dados Nutricionais </th> </tr> </thead>
                <tbody>
                <tr>
                    <th class="col-md-6 text-md-right"> <span> Índice de Massa Corporal desejado: </span> </th>
                    <td class="col-md-6 text-md-left"> <span id="pnRIndice"> - </span> </td> </tr>
                <tr>
                    <th class="col-md-6 text-md-right"> <span> Peso desejado: </span> </th>
                    <td class="col-md-6 text-md-left"> <span id="pnRPeso"> - </span> </td> </tr>
                <tr>
                    <th class="col-md-6 text-md-right"> <span> Quantidade de quilos a perder: </span> </th>
                    <td class="col-md-6 text-md-left"> <span id="pnRQuilos"> - </span> </td>
                </tr>

                </tbody>
            </table> <br/>

            <button id="btnRecalc" class="btn btn-primary btn-block btn-lg" type="button" onclick="recalculo()">Recalcular/Modificar dados</button>
        </div>
    </div> <br/>

</div>
</body>
</html>