<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>CAFE</title>
    <link rel="shortcut icon" href="../ext/logo_miniatura.ico" type="image/x-icon" />
</head>

<script>

    function calculaGMB(s,i,P,g,n){
        var gmb=0;
        if (s==1){
            if (i>=1 && i<=3) {
                gmb=(60.9*P)-54
            }
        else if (i>=4 && i<=10) {
                gmb = (22.7 * P) + 495
            }
        else if (i>=11 && i<=18) {
                gmb = (17.5 * P) + 651
            }
        else if (i>=19 && i<=30) {
                gmb = (15.3 * P) + 679
            }
        else if (i>=31 && i<=60) {
                gmb = (11.6 * P) + 879
            }
        else if (i>60) {
                gmb = (13.5 * P) + 487
            }
        }


        else if (s==2){
            if (i>=1 && i<=3) {
                gmb = (61 * P) - 51
            }
            else if (i>=4 && i<=10) {
                gmb = (22.5 * P) + 499
            }
            else if (i>=11 && i<=18) {
                gmb = (12.2 * P) + 746
            }
            else if (i>=19 && i<=30) {
                gmb = (14.7 * P) + 496
            }
            else if (i>=31 && i<=60) {
                gmb = (8.7 * P) + 829
            }
            else if (i>60) {
                gmb = (10.5 * P) + 596
            }
            if (g==1) {
                if (n == 1) {
                    gmb += 200
                }
            }
            else if (n==2) {
                gmb += 285
            }
        }
        return gmb
    }

    function calculaGET(gmb,s,i,n){
        var GET=0;
        if (s==1) {
            if (n == 1) {
                GET = gmb * 1.55
            }
            else if (n == 2) {
                GET = gmb * 1.78
            }
            else if (n == 3) {
                GET = gmb * 2.10
            }
        }

        else if (s==2) {
            if (n == 1) {
                GET = gmb * 1.56
            }
            else if (n == 2) {
                GET = gmb * 1.64
            }
            else if (n == 3) {
                GET = gmb * 1.82
            }
        }

        if (i>=13 && i<=15) {
            GET += (GET * 0.13)
        }
        else if (i>=16 && i<=19) {
            GET += (GET * 0.05)
        }
        else if (i>=40 && i<=49) {
            GET -= (GET * 0.05)
        }
        else if (i>=50 && i<=59) {
            GET -= (GET * 0.10)
        }
        else if (i>=60 && i<=69) {
            GET -= (GET * 0.20)
        }
        else if (i>70) {
            GET -= (GET * 0.30)
        }
        return GET
    }

    function calculo(){
        var nome = document.form.cNome.value;
        var idade = document.form.cIdade.value;
        if (document.form.cMasc.checked) {
            sexo = 1
        }
        else if (document.form.cFem.checked) {
            sexo = 2
        }
        var peso = document.form.cMassa.value;
        var altura = document.form.cEstat.value;
        if (document.form.cSgest.checked) {
            gest = 1
        }
        else if (document.form.cNgest.checked) {
            gest = 2
        }
        var naf = document.form.cNAF.value;
        var imc = peso/(altura*altura);

        var gmb = calculaGMB(sexo,idade,peso,gest,naf);
        var GET = calculaGET(gmb,sexo,idade,naf);

        document.getElementById('cIMC').value = parseFloat(imc.toFixed(2));
        document.getElementById('cGMB').value = parseFloat(gmb.toFixed(2));
        document.getElementById('cGET').value = parseFloat(GET.toFixed(2));

        return false;
    }

    function valida_form (){
        if(document.getElementById("cNome").value != ""){
            document.getElementById("cIdade").disabled = false;
            document.getElementById("cMasc").disabled = false;
            document.getElementById("cFem").disabled = false;
        }
        else{
            document.getElementById("cIdade").disabled = true;
            document.getElementById("cMasc").disabled = true;
            document.getElementById("cFem").disabled = true;
        }
        if (document.getElementById("cMassa").value != ""){
            document.getElementById("cEstat").disabled = false;
            document.getElementById("cSgest").disabled = false;
            document.getElementById("cNgest").disabled = false;
        }
        else{
            document.getElementById("cEstat").disabled = true;
            document.getElementById("cSgest").disabled = true;
            document.getElementById("cNgest").disabled = true;
        }
    }

    function mostraDiv2(){
        if (document.getElementById("cNome").value != "" && document.getElementById("cIdade").value != "") {
            document.getElementById("c2").style.display = 'block';
            if (document.getElementById("cFem").checked) {
                document.getElementById("c2.1").style.display = 'block'
            }
            else {
                document.getElementById("c2.1").style.display = 'none'
            }
        }
        else{
            document.getElementById("c2").style.display = 'none'
        }
    }

    function mostraDiv3(){
        if (document.getElementById("cMassa").value != "" && document.getElementById("cEstat").value != "") {
            document.getElementById("c3").style.display = 'block'
        }
        else{
            document.getElementById("c3").style.display = 'none'
        }
    }

    function mostraDiv4(){
        if (document.getElementById("cMassa").value != "" && document.getElementById("cEstat").value != "") {
            document.getElementById("c4").style.display = 'block'
        }
        else{
            document.getElementById("c4").style.display = 'none'
        }
    }



</script>

<body>
    <form method="post" name="form" id="formulario" onsubmit="return calculo()">
        <p><label for="cNome">Nome </label><input type="text" name="tNome" id="cNome" size="20" maxlength="30" placeholder="Nome Completo" onblur="valida_form()"/></p>
        <p><label for="cIdade">Idade </label><input type="number" name="tIdade" id="cIdade" disabled/></p>
        <fieldset id="sexo"><legend>Sexo</legend>
            <input type="radio" name="tSexo" id="cMasc" disabled onclick="mostraDiv2()"/> <label for="cMasc">Masculino</label><br/>
            <input type="radio" name="tSexo" id="cFem" disabled onclick="mostraDiv2()"/> <label for="cFem">Feminino</label>
        </fieldset>

        <div id="c2" style="display: none">
        <p><label for="cMassa">Massa corporal </label><input type="number" required min="0" step="any" name="tMassa" id="cMassa" onblur="valida_form()"/></p>
        <p><label for="cEstat">Estatura </label><input type="number" required min="0" step="any" name="tEstat" id="cEstat" disabled onblur="mostraDiv3()"/></p>
        </div>

        <div id="c2.1" style="display: none">
        <fieldset id="gest"><legend>Gestante </legend>
            <input type="radio" name="tGest" id="cSgest" disabled/> <label for="cSgest">Sim</label><br/>
            <input type="radio" name="tGest" id="cNgest" disabled/> <label for="cNgest">Não</label>
        </fieldset>
        </div>

        <div id="c3" style="display: none">
        <p><label for="cNAF">Nível de atividade física: </label><select name="tNAF"  id="cNAF">
            <option value="1">Leve</option>
            <option value="2">Moderada</option>
            <option value="3">Intensa</option>
        </select>
            <p><input type="submit" value="Calcular" id="Enviar" onclick="mostraDiv4()"/></p>
        </div>

        <div id="c4" style="display: none">
            <p>IMC: <input type="text" name="tIMC" id="cIMC"  readonly/></p>
            <p>GMB: <input type="text" name="tIMC" id="cGMB"  readonly/></p>
            <p>GET: <input type="text" name="tIMC" id="cGET"  readonly/></p>
        </div>
    </form>
</body>
</html>